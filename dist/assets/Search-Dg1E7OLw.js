import{c as F,k as q,r as m,j as e}from"./index-CZSZZV6j.js";import{N as E}from"./NetflixCard-mrHihnGq.js";import{s as V}from"./tmdb-eNF6KsIk.js";import"./config-CeCXydgj.js";const A=()=>{const{t:n}=F(),[T]=q(),c=T.get("q")||"",[f,j]=m.useState([]),[u,C]=m.useState(!1),[v,L]=m.useState(null),[w,y]=m.useState(0),[h,R]=m.useState(1),[g,N]=m.useState(0);m.useEffect(()=>{const s=setTimeout(()=>{c.trim()?P(c,1):(j([]),y(0),N(0)),R(1)},100);return()=>clearTimeout(s)},[c]);const M=s=>{const l=[s],a={avengers:"avengers",avenger:"avengers",avengrs:"avengers",batman:"batman",batmen:"batman",batmn:"batman",superman:"superman",supermen:"superman",spiderman:"spider-man","spider man":"spider-man",spidermen:"spider-man",starwars:"star wars","star war":"star wars",harrypotter:"harry potter","harry poter":"harry potter",gameofthrones:"game of thrones","game of throne":"game of thrones",breakingbad:"breaking bad","breaking bed":"breaking bad",theoffice:"the office",office:"the office",friends:"friends",friend:"friends","stranger things":"stranger things","stranger thing":"stranger things",strangerthings:"stranger things"},i=s.toLowerCase().trim();if(a[i]&&l.push(a[i]),s.length>3){const r=s.split(" ").filter(o=>o.length>2);if(r.length>1&&(r.forEach(o=>{o.length>3&&l.push(o)}),r.length>2))for(let o=0;o<r.length-1;o++)l.push(`${r[o]} ${r[o+1]}`)}return[...new Set(l)]},P=async(s,l)=>{try{C(!0),L(null);const a=M(s);console.log("🔍 Smart search queries:",a);let i=[];for(const t of a)try{const x=(await V.searchMulti(t,1)).data.results||[];if(i=[...i,...x],i.length>=40)break}catch{console.log(`Search failed for query: ${t}`);continue}const S=i.filter((t,d,x)=>d===x.findIndex(p=>p.id===t.id)).filter(t=>t&&t.id&&(t.title||t.name)&&t.media_type!=="person"&&t.poster_path).sort((t,d)=>{const x=(t.title||t.name||"").toLowerCase(),p=(d.title||d.name||"").toLowerCase(),b=s.toLowerCase();return x.includes(b)&&!p.includes(b)?-1:!x.includes(b)&&p.includes(b)?1:(d.popularity||0)-(t.popularity||0)});j(S),y(S.length),N(Math.ceil(S.length/20)),R(l)}catch(a){console.error("Search error:",a),L(n.failedToLoad||"Failed to search. Please try again."),j([]),y(0),N(0)}finally{C(!1)}},k=s=>{s>=1&&s<=g&&(P(c,s),window.scrollTo({top:0,behavior:"smooth"}))},z=()=>{if(g<=1)return null;const s=[],l=5;let a=Math.max(1,h-Math.floor(l/2)),i=Math.min(g,a+l-1);i-a+1<l&&(a=Math.max(1,i-l+1)),s.push(e.jsxs("button",{onClick:()=>k(h-1),disabled:h===1,className:"px-3 mobile:px-4 py-2 mx-1 text-xs mobile:text-sm font-medium text-white bg-gray-800 border border-gray-700 rounded hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors touch:active:scale-95 min-h-[44px]",children:[e.jsx("span",{className:"hidden mobile:inline",children:"Previous"}),e.jsx("span",{className:"mobile:hidden",children:"Prev"})]},"prev"));for(let r=a;r<=i;r++)s.push(e.jsx("button",{onClick:()=>k(r),className:`px-3 mobile:px-4 py-2 mx-1 text-xs mobile:text-sm font-medium rounded transition-colors touch:active:scale-95 min-h-[44px] min-w-[44px] ${h===r?"text-white bg-red-600 border border-red-600 hover:bg-red-700":"text-white bg-gray-800 border border-gray-700 hover:bg-gray-700"}`,children:r},r));return s.push(e.jsxs("button",{onClick:()=>k(h+1),disabled:h===g,className:"px-3 mobile:px-4 py-2 mx-1 text-xs mobile:text-sm font-medium text-white bg-gray-800 border border-gray-700 rounded hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors touch:active:scale-95 min-h-[44px]",children:[e.jsx("span",{className:"hidden mobile:inline",children:"Next"}),e.jsx("span",{className:"mobile:hidden",children:"Next"})]},"next")),e.jsx("div",{className:"flex justify-center items-center mt-8 mobile:mt-12 px-2",children:e.jsx("nav",{className:"flex items-center flex-wrap justify-center gap-1",children:s})})};return c.trim()?e.jsx("div",{className:"min-h-screen bg-black py-6 mobile:py-8",children:e.jsxs("div",{className:"container mx-auto px-3 mobile:px-4",children:[e.jsxs("div",{className:"mb-8 mobile:mb-10",children:[e.jsx("h1",{className:"text-2xl mobile:text-3xl lg:text-4xl font-bold text-white mb-2 mobile:mb-3 text-center mobile:text-left",children:n.searchResults||"Search Results"}),e.jsx("p",{className:"text-gray-400 text-sm mobile:text-base lg:text-lg text-center mobile:text-left",children:u?e.jsxs("span",{className:"flex items-center justify-center mobile:justify-start",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-4 w-4 mobile:h-5 mobile:w-5 text-red-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),n.loading||"Searching..."]}):w>0?e.jsxs(e.Fragment,{children:["Found ",e.jsx("span",{className:"text-red-600 font-semibold",children:w})," result",w!==1?"s":"",' for "',e.jsx("span",{className:"text-white",children:c}),'"']}):e.jsxs(e.Fragment,{children:[n.noResults||"No results found",' for "',e.jsx("span",{className:"text-white",children:c}),'"']})})]}),v&&e.jsx("div",{className:"bg-red-900/20 border border-red-600/30 rounded-lg p-6 mb-8",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-6 w-6 text-red-500",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-red-300 font-medium",children:v})})]})}),u&&e.jsx("div",{className:"flex justify-center py-20",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-red-600 mb-4"}),e.jsx("p",{className:"text-gray-400",children:"Loading results..."})]})}),!u&&f.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-2 xs:grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-3 mobile:gap-4 md:gap-6",children:f.filter(s=>s&&s.id).map(s=>e.jsx(E,{item:s},s.id))}),z()]}),!u&&!v&&f.length===0&&c.trim()&&e.jsxs("div",{className:"text-center py-20",children:[e.jsx("div",{className:"w-32 h-32 mx-auto mb-8 text-gray-600",children:e.jsx("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"w-full h-full",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),e.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:n.noResults||"No results found"}),e.jsxs("p",{className:"text-gray-400 mb-6 text-lg max-w-md mx-auto",children:["We couldn't find any ",n.movies?.toLowerCase()||"movies"," or ",n.tvShows?.toLowerCase()||"TV shows",' matching "',e.jsx("span",{className:"text-white font-medium",children:c}),'"']}),e.jsxs("div",{className:"space-y-2 text-gray-500",children:[e.jsx("p",{children:"Try searching with different keywords"}),e.jsx("p",{children:"Check your spelling"}),e.jsx("p",{children:"Use more general terms"})]})]})]})}):e.jsx("div",{className:"min-h-screen bg-black py-8",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"text-center py-20",children:[e.jsx("div",{className:"mb-8",children:e.jsx("svg",{className:"w-20 h-20 mx-auto text-gray-600 mb-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),e.jsxs("h1",{className:"text-4xl font-bold text-white mb-6",children:[n.searchFor||"Search"," ",n.movies||"Movies"," & ",n.tvShows||"TV Shows"]}),e.jsx("p",{className:"text-gray-400 text-lg max-w-md mx-auto",children:n.searchPlaceholder||"Use the search bar above to discover thousands of movies and TV shows"})]})})})};export{A as default};
