import{c as I,r as C,j as n}from"./index-CZSZZV6j.js";import{N as k}from"./NetflixRow-8mwDn4wm.js";import{t as L}from"./tmdb-eNF6KsIk.js";import"./NetflixCard-mrHihnGq.js";import"./config-CeCXydgj.js";const G=new Map,J=600*1e3,te=()=>{const{t:N}=I(),[F,E]=C.useState([]),[M,q]=C.useState([]),[W,z]=C.useState([]),[O,U]=C.useState([]),[f,H]=C.useState([]),[_,$]=C.useState(null),[K,B]=C.useState(!1),R=["All","Action & Adventure","Comedy","Crime","Drama"];return C.useEffect(()=>{(async()=>{try{$(null);const b=async(i,u)=>{const a=G.get(i);if(a&&Date.now()-a.timestamp<J)return console.log(`ðŸ“¦ Using cached TV data for ${i}`),a.data;console.log(`ðŸ”„ Fetching fresh TV data for ${i}`);const d=await u();return G.set(i,{data:d,timestamp:Date.now()}),d},S=async(i,u,a=3)=>{const d=`tv_${u}_${a}pages`;return b(d,async()=>{const m=[];for(let h=1;h<=a;h++)m.push(i(h));return(await Promise.all(m)).flatMap(h=>h.data.results||[])})},o=await S(L.getPopular,"popular",3),j=await S(L.getTopRated,"topRated",3),[x,A]=await Promise.all([S(L.getOnTheAir,"onTheAir",3),S(L.getAiringToday,"airingToday",3)]);let c=[],T=[];try{console.log("ðŸ“º Fetching genre-specific TV shows..."),console.log("ðŸ“º Testing comedy TV API...");const i=await L.getComedy(1).catch(a=>(console.error("Comedy TV API failed:",a),{data:{results:[]}}));console.log("ðŸ“º Comedy TV API test result:",i.data.results.length,"shows"),[c,T]=await Promise.all([S(L.getComedy,"comedy",8).catch(()=>[]),S(L.getDrama,"drama",6).catch(()=>[])]),console.log("ðŸ“º Genre TV shows fetched:",{comedy:c.length,drama:T.length,comedySample:c.slice(0,3).map(a=>a.name||a.title)})}catch(i){console.warn("Genre TV API calls failed:",i)}const V=new Set,l=(i,u=250)=>{const a=[];for(const d of i)!V.has(d.id)&&a.length<u&&(V.add(d.id),a.push(d));return a},r=l(o,100),t=l(j,100),s=l(x,100),e=l(A,100);console.log("ðŸ“º Skipping image validation - showing all TV shows with fallback handling in components"),E(r),q(t),z(s),U(e);const g=[...r,...t,...s,...e],y=[...g,...c,...T];if(c.length<50){console.log("ðŸ“º Comedy TV fallback: Creating additional comedy content from existing shows");const i=["comedy","funny","humor","sitcom","comic","laugh","hilarious"],u=[...r,...t,...s,...e].filter(a=>{const d=(a.name||a.title||"").toLowerCase(),m=(a.overview||"").toLowerCase();return i.some(w=>d.includes(w)||m.includes(w))}).slice(0,100);console.log(`ðŸ“º Found ${u.length} additional comedy shows from existing content`),y.push(...u)}if(T.length<50){console.log("ðŸ“º Drama TV fallback: Creating additional drama content from existing shows");const i=["drama","dramatic","emotional","family","relationship","romance","love","life","story"],u=[...r,...t,...s,...e].filter(a=>{const d=(a.name||a.title||"").toLowerCase(),m=(a.overview||"").toLowerCase();return i.some(w=>d.includes(w)||m.includes(w))}).slice(0,100);console.log(`ðŸ“º Found ${u.length} additional drama shows from existing content`),y.push(...u)}console.log(`Total unique TV shows loaded: ${g.length}, with genres: ${y.length}`),H(y);const v=["All"];R.slice(1).forEach(i=>{const u={"action & adventure":["action","adventure","action & adventure"],animation:["animation","animated","cartoon"],comedy:["comedy","humor","funny"],crime:["crime","criminal","detective"],documentary:["documentary","biography","biopic"],drama:["drama","dramatic"],family:["family","children","kids"],kids:["kids","children","family"],mystery:["mystery","detective","suspense"],news:["news","current affairs"],reality:["reality","reality tv","competition"],"sci-fi & fantasy":["sci-fi","science fiction","fantasy","scifi","science-fiction"],soap:["soap","soap opera","drama"],talk:["talk","talk show","interview"],"war & politics":["war","politics","political","military"],western:["western","cowboy"]};g.filter(d=>{if(!d.genre_ids||d.genre_ids.length===0)return!1;const m=i.toLowerCase(),w=u[m]||[m];return d.genre_ids.some(h=>{const p=typeof h=="string"?h.toLowerCase():String(h);return w.some(D=>p.includes(D)||D.includes(p)||p===D)})}).length===0?g.filter(m=>{if(!m.genre_ids||m.genre_ids.length===0)return!1;const w=i.toLowerCase();return m.genre_ids.some(h=>{const p=typeof h=="string"?h.toLowerCase():String(h);return p.includes(w.substring(0,4))||w.includes(p.substring(0,4))||i==="Sci-Fi & Fantasy"&&(p.includes("sci")||p.includes("fantasy"))||i==="Action & Adventure"&&(p.includes("action")||p.includes("adventure"))||i==="War & Politics"&&(p.includes("war")||p.includes("politics"))})}).length>0&&v.push(i):v.push(i)})}catch(b){console.error("Error fetching TV shows:",b),$("Failed to load TV shows. Please try again.")}finally{B(!0)}})()},[]),n.jsxs("div",{className:"min-h-screen",children:[_&&n.jsx("div",{className:"bg-red-900 border-l-4 border-red-500 p-4 relative z-50",children:n.jsx("div",{className:"container mx-auto px-4",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:n.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),n.jsx("div",{className:"ml-3",children:n.jsx("p",{className:"text-sm text-red-200",children:_})})]})})}),n.jsxs("div",{className:"pt-24 pb-8 px-4 md:px-12",children:[n.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-white mb-2",children:N.tvShows}),n.jsx("p",{className:"text-gray-400 text-lg",children:"Discover amazing TV shows from different categories"})]}),n.jsxs("div",{className:"space-y-6 mobile:space-y-8 px-2 mobile:px-4 md:px-12 pb-16",children:[n.jsx("div",{className:"animate-fade-in-up",style:{animationDelay:"0.2s"},children:n.jsx(k,{title:N.popularTVShows,items:F})}),n.jsx("div",{className:"animate-fade-in-up",style:{animationDelay:"0.4s"},children:n.jsx(k,{title:N.topRated,items:M})}),n.jsx("div",{className:"animate-fade-in-up",style:{animationDelay:"0.6s"},children:n.jsx(k,{title:N.onTheAir,items:W})}),n.jsx("div",{className:"animate-fade-in-up",style:{animationDelay:"0.8s"},children:n.jsx(k,{title:N.airingToday,items:O})}),(()=>{const P={"action & adventure":["action","adventure","action & adventure"],animation:["animation","animated","cartoon"],comedy:["comedy","humor","funny"],crime:["crime","criminal","detective"],documentary:["documentary","biography","biopic"],drama:["drama","dramatic"],family:["family","children","kids"],kids:["kids","children","family"],mystery:["mystery","detective","suspense"],news:["news","current affairs"],reality:["reality","reality tv","competition"],"sci-fi & fantasy":["sci-fi","science fiction","fantasy","scifi","science-fiction"],soap:["soap","soap opera","drama"],talk:["talk","talk show","interview"],"war & politics":["war","politics","political","military"],western:["western","cowboy"]},b=[],S=(o,j=150)=>{const x=o.toLowerCase(),A=P[x]||[x];if(console.log(`ðŸ“º Processing genre "${o}" with ${f.length} total shows available`),x==="comedy"){console.log("ðŸ“º Special Comedy processing - using aggressive matching");const l=["comedy","funny","humor","sitcom","comic","laugh","hilarious","parody","satire"];let r=f.filter(t=>{const s=(t.name||t.title||"").toLowerCase(),e=(t.overview||"").toLowerCase();return t.genre_ids&&t.genre_ids.length>0&&t.genre_ids.some(y=>{const v=typeof y=="string"?y.toLowerCase():String(y);return A.some(i=>v.includes(i)||i.includes(v)||v===i)})?!0:l.some(g=>s.includes(g)||e.includes(g))});return console.log(`ðŸ“º Comedy shows found: ${r.length}`),r.slice(0,j)}if(x==="drama"){console.log("ðŸ“º Special Drama processing - using aggressive matching");const l=["drama","dramatic","emotional","family","relationship","romance","love","life","story","series"];let r=f.filter(t=>{const s=(t.name||t.title||"").toLowerCase(),e=(t.overview||"").toLowerCase();return t.genre_ids&&t.genre_ids.length>0&&t.genre_ids.some(y=>{const v=typeof y=="string"?y.toLowerCase():String(y);return A.some(i=>v.includes(i)||i.includes(v)||v===i)})?!0:l.some(g=>s.includes(g)||e.includes(g))});return console.log(`ðŸ“º Drama shows found: ${r.length}`),r.slice(0,j)}let c=f.filter(l=>!l.genre_ids||l.genre_ids.length===0?!1:l.genre_ids.some(r=>{const t=typeof r=="string"?r.toLowerCase():String(r);return A.some(s=>t.includes(s)||s.includes(t)||t===s)}));if(c.length<4){const l=f.filter(t=>A.some(s=>t.title.toLowerCase().includes(s)||t.overview.toLowerCase().includes(s))),r=new Set(c.map(t=>t.id));l.forEach(t=>{r.has(t.id)||(c.push(t),r.add(t.id))})}if(c.length<3){const l=f.filter(t=>{const s=t.title.toLowerCase(),e=t.overview.toLowerCase();return!!(o==="Action & Adventure"&&(s.includes("fight")||s.includes("war")||s.includes("police")||e.includes("action"))||o==="Animation"&&(s.includes("animated")||e.includes("animation")||e.includes("cartoon"))||o==="Comedy"&&(s.includes("funny")||e.includes("comedy")||e.includes("humor"))||o==="Crime"&&(s.includes("police")||s.includes("detective")||e.includes("crime")||e.includes("murder"))||o==="Documentary"&&(e.includes("documentary")||e.includes("true story")||e.includes("biography"))||o==="Drama"&&(e.includes("drama")||e.includes("emotional")||e.includes("family"))||o==="Family"&&(s.includes("family")||e.includes("children")||e.includes("kids"))||o==="Kids"&&(s.includes("kids")||e.includes("children")||e.includes("young"))||o==="Mystery"&&(s.includes("mystery")||e.includes("detective")||e.includes("investigation"))||o==="News"&&(s.includes("news")||e.includes("current")||e.includes("report"))||o==="Reality"&&(s.includes("reality")||e.includes("competition")||e.includes("real"))||o==="Sci-Fi & Fantasy"&&(s.includes("space")||s.includes("future")||e.includes("fantasy")||e.includes("magic"))||o==="Soap"&&(e.includes("soap")||e.includes("romance")||e.includes("relationship"))||o==="Talk"&&(s.includes("talk")||e.includes("interview")||e.includes("host"))||o==="War & Politics"&&(s.includes("war")||e.includes("political")||e.includes("government"))||o==="Western"&&(s.includes("western")||e.includes("cowboy")||e.includes("frontier")))}),r=new Set(c.map(t=>t.id));l.forEach(t=>{r.has(t.id)||(c.push(t),r.add(t.id))})}let T=c.slice(0,j);const V=new Set;return T=T.filter(l=>V.has(l.id)?!1:(V.add(l.id),!0)),T};return R.slice(1).forEach((o,j)=>{const x=o.toLowerCase(),c=S(o,x==="comedy"||x==="drama"?500:300);console.log(`ðŸ“º Genre "${o}": ${c.length} shows`),c.length>0&&b.push(n.jsx("div",{className:"animate-fade-in-up",style:{animationDelay:`${.2+j*.1}s`},children:n.jsx(k,{title:`${o} Shows`,items:c})},o))}),console.log(`TV Shows: Generated ${b.length} genre rows. Total shows available: ${f.length}`),f.length>0&&console.log("Sample TV show data:",{title:f[0].title,genre_ids:f[0].genre_ids,overview:f[0].overview?.substring(0,100)}),b})(),!_&&K&&f.length===0&&n.jsxs("div",{className:"text-center py-16 px-4",children:[n.jsx("div",{className:"w-24 h-24 mx-auto mb-4 text-gray-400",children:n.jsx("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),n.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"No TV shows found"}),n.jsx("p",{className:"text-gray-400",children:"Unable to load TV shows at the moment. Please try again later."})]})]})]})};export{te as default};
